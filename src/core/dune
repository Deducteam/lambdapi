(rule
 (targets version.ml)
 (action
  (with-stdout-to version.ml
    (run ocaml unix.cma %{dep:../../tools/gen_version.ml})))
 (mode fallback))

(library
 (name core)
 (public_name lambdapi.core)
 (synopsis "LambdaPi interactive theorem prover [core]")
 (modules :standard)
 (foreign_stubs
  (language c)
  (names stubs))
 (preprocess (pps sedlex.ppx))
 (libraries sedlex sedlex.ppx unix stdlib-shims timed bindlib why3))

(menhir (flags --external-tokens Lp_lexer) (modules lp_parser))

(ocamllex legacy_lexer)
(menhir
 (flags (--external-tokens Legacy_lexer))
 (modules menhir_parser))
